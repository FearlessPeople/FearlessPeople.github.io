(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{454:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#standalone模式"}},[s._v("Standalone模式")])]),t("li",[t("a",{attrs:{href:"#yarn模式"}},[s._v("YARN模式")]),t("ul",[t("li",[t("a",{attrs:{href:"#提前初始化flink集群形式-flink-yarn-session"}},[s._v("提前初始化Flink集群形式(Flink yarn-session)")])]),t("li",[t("a",{attrs:{href:"#每次新创建flink集群形式"}},[s._v("每次新创建Flink集群形式")])])])]),t("li",[t("a",{attrs:{href:"#kubernetes模式"}},[s._v("Kubernetes模式")])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"standalone模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#standalone模式"}},[s._v("#")]),s._v(" Standalone模式")]),s._v(" "),t("h2",{attrs:{id:"yarn模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn模式"}},[s._v("#")]),s._v(" YARN模式")]),s._v(" "),t("p",[s._v("Flink on Yarn模式在使用的时候又可以分为两种，如图3.5所示。\n"),t("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNly1gvahrjxtv2j61bd0u0jv402.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"提前初始化flink集群形式-flink-yarn-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提前初始化flink集群形式-flink-yarn-session"}},[s._v("#")]),s._v(" 提前初始化Flink集群形式(Flink yarn-session)")]),s._v(" "),t("p",[t("strong",[s._v("第1种模式")]),s._v("：是在YARN中提前初始化一个Flink集群(称为Flink yarn-session)，开辟指定的资源，以后的Flink任务都提交到这里。这个Flink集群会常驻在YARN集群中，除非手工停止。这种方式创建的Flink集群会独占资源，不管有没有Flink任务在执行，YARN上面的其他任务都无法使用这些资源。")]),s._v(" "),t("p",[t("strong",[s._v("使用步骤")]),s._v("\n（1）创建一个一直运行的Flink集群(也可以称为Flink yarn-session)。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 flink-1.10.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/yarn-session.sh -n 2 -jm 1024 -tm 1024 -d")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("参数最后面的-d参数是可选项，表示是否在后台独立运行。\n执行以后可以到hadoop100的8088任务界面确认是否有Flink任务成功运行。")])]),s._v(" "),t("p",[s._v("（2）附着到一个已存在的Flink集群中。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 flink-1.10.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/yarn-session.sh -id applicationId")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("参数最后面的applicationId是一个变量，需要获取第1步创建的Flink集群对应的applicationId信息。")])]),s._v(" "),t("p",[s._v("（3）执行Flink任务。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 flink-1.10.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/flink run ./examples/batch/WordCount.jar")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("WordCount.jar程序默认的输入是内置数据，默认的输出是stdout。当然也可以通过-input和-output来手动指定输入数据目录和输出数据目录。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("-input hdfs://hadoop100:9000/LICENSE\n-output hdfs://hadoop100:9000/wordcount-result.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"每次新创建flink集群形式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#每次新创建flink集群形式"}},[s._v("#")]),s._v(" 每次新创建Flink集群形式")]),s._v(" "),t("p",[t("strong",[s._v("第2种模式")]),s._v("：每次提交Flink任务都会创建一个新的Flink集群，每个Flink任务之间相互独立、互不影响，管理方便。任务执行完成之后创建的Flink集群也会消失，不会额外占用资源，按需使用，这使资源利用率达到最大，在工作中推荐使用这种模式。")]),s._v(" "),t("p",[t("strong",[s._v("使用步骤")]),s._v("\n提交Flink任务的同时创建Flink集群。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop100 flink-1.10.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/flink run -m yarn-cluster -yn 2 -yjm 1024 -ytm 1024")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("Client端(提交Flink任务的机器)必须要设置YARN_CONF_DIR、HADOOP_CONF_DIR或者HADOOP_HOME环境变量，Flink会通过这个环境变量来读取YARN和HDFS的配置信息，否则启动会失败。")])]),s._v(" "),t("h2",{attrs:{id:"kubernetes模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes模式"}},[s._v("#")]),s._v(" Kubernetes模式")])])}),[],!1,null,null,null);a.default=e.exports}}]);
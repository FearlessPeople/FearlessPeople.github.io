(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{491:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),a("p",[s._v("本示例将实现从MySQL数据库中将数据导入到HDFS中")]),s._v(" "),a("p",[s._v("参考文档：\n"),a("a",{attrs:{href:"http://sqoop.apache.org/docs/1.99.7/user/Sqoop5MinutesDemo.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://sqoop.apache.org/docs/1.99.7/user/Sqoop5MinutesDemo.html"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"http://blog.csdn.net/m_signals/article/details/53190965",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.csdn.net/m_signals/article/details/53190965"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"http://blog.csdn.net/lazythinker/article/details/52064165",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.csdn.net/lazythinker/article/details/52064165"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"http://blog.sina.com.cn/s/blog_61d8d9640102whof.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.sina.com.cn/s/blog_61d8d9640102whof.html"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("mysql数据库信息：")]),s._v("\ntest库中user表中的记录（共1条）")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o14apn2j30pk076jrq.jpg",alt:"img"}})]),s._v(" "),a("p",[a("strong",[s._v("HDFS数据情况")]),s._v(" "),a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o0280glj322802s0tu.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("创建了一个/root/test的空目录")]),s._v(" "),a("p",[a("strong",[s._v("实现目标：")]),s._v("\n本示例需要实现将上方MySQL数据库中的数据导入到HDFS中")]),s._v(" "),a("h2",{attrs:{id:"开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[s._v("#")]),s._v(" 开始")]),s._v(" "),a("p",[s._v("启动Hadoop，启动sqoop，命令行进入sqoop")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置交互的命令行打印更多信息，打印的异常信息更多")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" option --name verbose --value "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 连接sqoop，其中hadoop1是需要连接的sqoop的主机名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" server --host hadoop1 --port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12000")]),s._v(" --webapp sqoop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看连接")]),s._v("\nshow version --all\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"创建link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建link"}},[s._v("#")]),s._v(" 创建link")]),s._v(" "),a("p",[s._v("如果需要使用sqoop进行导入导出操作，需要先创建连接， 使用show conncetor命令可以查看sqoop支持的连接器， 而sqoop中默认提供了如下几种连接。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o2zu1i4j31p40e479z.jpg",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"创建mysql-link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建mysql-link"}},[s._v("#")]),s._v(" 创建mysql-link")]),s._v(" "),a("p",[s._v("本例实现mysql--\x3ehdfs的数据导入操作，所以需要创建一个mysql的link和hdfs的link。")]),s._v(" "),a("p",[a("strong",[s._v("注意：在创建mysql-link的时候需要将mysql的jar包放入到$SQOOP2_HOME/server/lib/extra-lib目录中")])]),s._v(" "),a("p",[s._v("首先创建mysql-link，过程如下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqoop:00"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" -connector generic-jdbc-connector\nCreating "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" connector with name generic-jdbc-connector\nPlease fill following values to create new "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" object\nName: mysql-link\n\nDatabase connection\n\nDriver class: com.mysql.jdbc.Driver\nConnection String: jdbc:mysql://10.25.40.37/test\nUsername: root\nPassword: *********\nFetch Size:\nConnection Properties:\nThere are currently "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" values "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the map:\nentry"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## protocol=tcp")]),s._v("\nThere are currently "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" values "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the map:\nprotocol "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nentry"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\nSQL Dialect\n\nIdentifier enclose:\nNew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" was successfully created with validation status OK and name mysql-link\nsqoop:00"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[s._v("以上输入项说明，下图中红色的表示需要输入的内容。")]),s._v(" "),a("p",[s._v("注意Identifier enclose项需要输入一个空格，然后回车")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7nzzb7tnj311a0pk48j.jpg",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"创建hdfs-link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建hdfs-link"}},[s._v("#")]),s._v(" 创建hdfs-link")]),s._v(" "),a("p",[s._v("创建HDFS的link的配置就比较简单，配置HDFS访问地址和hadoop配置文件目录路径即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqoop:00"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" -connector hdfs-connector\nCreating "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" connector with name hdfs-connector\nPlease fill following values to create new "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" object\nName: hdfs-link\n\nHDFS cluster\n\nURI: hdfs://hadoop1:9000\nConf directory: /usr/local/hadoop/hadoop-2.7.4/etc/hadoop\nAdditional configs::\nThere are currently "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" values "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the map:\nentry"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\nNew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" was successfully created with validation status OK and name hdfs-link\nsqoop:00"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7nzrkmd8j315a0g8n1h.jpg",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"创建job"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建job"}},[s._v("#")]),s._v(" 创建job")]),s._v(" "),a("p",[s._v("创建job时，配置项较多。\n命令:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## create job -f formLinkName -t toLinkName")]),s._v("\ncreate job -f mysql-link -t hdfs-link\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("注意下面中文部分")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sqoop:000> create job -f mysql-link -t hdfs-link \nCreating job for links with from name mysql-link and to name hdfs-link \nPlease fill following values to create new job object \nName: test1（job名称）\n\nDatabase source\n\nSchema name: test（数据库的schema名称） \nTable name: user（数据库表名） \nSQL statement: \nColumn names: \nThere are currently 0 values in the list: \nelement## \nPartition column: \nPartition column nullable: \nBoundary query:\n\nIncremental read\n\nCheck column: \nLast value:\n\nTarget configuration\n\nOverride null value: \nNull value: \nFile format: \n  0 : TEXT_FILE \n  1 : SEQUENCE_FILE \n  2 : PARQUET_FILE \nChoose: 0（选择文本文件） \nCompression codec: \n  0 : NONE \n  1 : DEFAULT \n  2 : DEFLATE \n  3 : GZIP \n  4 : BZIP2 \n  5 : LZO \n  6 : LZ4 \n  7 : SNAPPY \n  8 : CUSTOM \nChoose: 0（选择NONE） \nCustom codec: \nOutput directory: /root/test（这里输入HDFS文件的目录，需要是空目录） \nAppend mode:\n\nThrottling resources\n\nExtractors: 2（这里是参考官网填的2） \nLoaders: 2（这里是参考官网填的2）\n\nClasspath configuration\n\nExtra mapper jars: \nThere are currently 0 values in the list: \nelement## \nNew job was successfully created with validation status OK  and name test1 \nsqoop:000>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("h2",{attrs:{id:"启动job"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动job"}},[s._v("#")]),s._v(" 启动job")]),s._v(" "),a("p",[s._v("命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## start job -name jobName")]),s._v("\nstart job -name test1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"验证是否导入成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证是否导入成功"}},[s._v("#")]),s._v(" 验证是否导入成功")]),s._v(" "),a("p",[s._v("查看HDFS中的/root/test/目录中的数据，共出现了2个文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o04yd22j323e068tcj.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("查看文件内容")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7odlo6pxj3274078q85.jpg",alt:"img"}}),s._v("\n可以看到2ea38d69-e9e4-4364-adfc-67d88f5c8153.txt文件中已经存在了导入的数据，而8962bce1-08e7-4ebc-939e-4839d05eb145.txt是个空文件。")]),s._v(" "),a("h2",{attrs:{id:"期间遇到的问题及解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#期间遇到的问题及解决方案"}},[s._v("#")]),s._v(" 期间遇到的问题及解决方案")]),s._v(" "),a("p",[s._v("以下问题均是创建完link和job后，开始启动job时报的错。")]),s._v(" "),a("h3",{attrs:{id:"_1-host-10-25-40-37-is-not-allowed-to-connect-to-this-mysql-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-host-10-25-40-37-is-not-allowed-to-connect-to-this-mysql-server"}},[s._v("#")]),s._v(" 1. Host '10.25.40.37' is not allowed to connect to this MySQL server")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("Host '10.25.40.37' is not allowed to connect to this MySQL server")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o01f09mj323m02gt9k.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("错误原因：\n这问题表示主机10.25.40.37没有授权外部访问其MySQL")]),s._v(" "),a("p",[a("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),a("p",[s._v("将连接的MySQL主机中的授权信息改了")]),s._v(" "),a("ol",[a("li",[s._v("直接改mysql库中user表root的那条记录，将其值改为%（表示任何主机都可访问）\n"),a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7nzsdxhvj30qc08adgs.jpg",alt:"img"}})]),s._v(" "),a("li",[s._v("使用授权命令，授权指定的主机可访问该数据库（推荐：更安全）")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GRANT ALL PRIVILEGES ON *.* TO "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'username'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v(" WITH GRANT OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" FLUSH PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("详细操作步骤可自行百度。")]),s._v(" "),a("h3",{attrs:{id:"_2-user-root-is-not-allowed-to-impersonate-root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-user-root-is-not-allowed-to-impersonate-root"}},[s._v("#")]),s._v(" 2. User: root is not allowed to impersonate root")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("User: root is not allowed to impersonate root")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o9l8wtbj31e802qmxs.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("错误原因：\n该错误是因为在安装sqoop时，在hadoop的core-site.xml配置文件中配置的用户权限错误\n在之前的sqoop安装文章里，按照官网的配置如下。其中hadoop.proxyuser.sqoop2.hosts中的sqoop2是用户的意思，同理hadoop.proxyuser.sqoop2.groups中的sqoop2是用户组的意思。")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.proxyuser.sqoop2.hosts"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("*"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.proxyuser.sqoop2.groups"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("*"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v("解决方案：")])]),s._v(" "),a("p",[s._v("将sqoop2改为root即可，改完后如下：（PS:这里的解决方案感觉还是有问题不完美，没有深入了解）")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.proxyuser.root.hosts"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("*"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.proxyuser.root.groups"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("*"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_3-generic-hdfs-connector-0007-invalid-input-output-directory-unexpected-exception"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-generic-hdfs-connector-0007-invalid-input-output-directory-unexpected-exception"}},[s._v("#")]),s._v(" 3. GENERIC_HDFS_CONNECTOR_0007:Invalid input/output directory - Unexpected exception")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("GENERIC_HDFS_CONNECTOR_0007:Invalid input/output directory - Unexpected exception")])]),s._v(" "),a("p",[s._v("输入输出目录有问题，检查HDFS中是否存在相应目录即可")]),s._v(" "),a("h3",{attrs:{id:"_4-there-are-0-datanode-s-running-and-no-node-s-are-excluded-in-this-operation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-there-are-0-datanode-s-running-and-no-node-s-are-excluded-in-this-operation"}},[s._v("#")]),s._v(" 4. There are 0 datanode(s) running and no node(s) are excluded in this operation")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("There are 0 datanode(s) running and no node(s) are excluded in this operation")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7o9wgeqxj327405umzq.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("错误原因：\n启动job的时候报的错，这应该是datanode节点数据的问题")]),s._v(" "),a("p",[a("strong",[s._v("解决方案：")])]),s._v(" "),a("ol",[a("li",[s._v("配置dfs.datanode.data.dir和core-site.xml里面的hadoop.tmp.dir一致\nhdfs-site.xml里面的\n​     dfs.datanode.data.dir\n​     /tmp/hdfs_tmp\n与core-site.xml里面的\n​     hadoop.tmp.dir\n​     /tmp/hdfs_tmp\n两个配置应该是指向同一个目录地址，而且必须是一个已经存在的linux目录(不存在目录的话，在启动hadoop时，必须手动创建，否则put文件到hdfs系统时就会报错)，今天报这个错就是因为两个配置没有指向同一个目录地址，且两个地址还不存在对应的目录")])]),s._v(" "),a("p",[s._v("参考：  "),a("a",{attrs:{href:"http://blog.sina.com.cn/s/blog_61d8d9640102whof.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.sina.com.cn/s/blog_61d8d9640102whof.html"),a("OutboundLink")],1)]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("删除dfs.namenode.data.dir中的current文件夹中的内容，格式化namenode，重新启动hadoop\n参考： "),a("a",{attrs:{href:"http://blog.csdn.net/qiruiduni/article/details/50280943",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.csdn.net/qiruiduni/article/details/50280943"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("最后我使用了1解决方案后问题解决了，但是不知道以后会不会有其他问题。")]),s._v(" "),a("h3",{attrs:{id:"_5-call-from-hadoop1-192-168-56-110-to-0-0-0-0-10020-failed-on-connection-exception"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-call-from-hadoop1-192-168-56-110-to-0-0-0-0-10020-failed-on-connection-exception"}},[s._v("#")]),s._v(" 5. Call From hadoop1/192.168.56.110 to 0.0.0.0:10020 failed on connection exception")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("Call From hadoop1/192.168.56.110 to 0.0.0.0:10020 failed on connection exception")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7obcmda2j326m040q4x.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("问题原因：")]),s._v(" "),a("p",[s._v("报错信息提示，在访问端口 100020的时候出错，这表示DataNode 需要访问 MapReduce JobHistory Server，而默认值是： 0.0.0.0:10020 。")]),s._v(" "),a("p",[a("strong",[s._v("解决方案：")])]),s._v(" "),a("p",[s._v("找到{HADOOP_HOME}/etc/hadoop/mapred-site.xml配置文件 ,增加如下配置：")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 配置实际的主机名和端口--\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("{namenode}:10020"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("这里我的主机名是hadoop1，所以配置的值是hadoop1:10020")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7nzok0tgj30pa04q0tg.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("参考： "),a("a",{attrs:{href:"http://blog.csdn.net/lazythinker/article/details/52064165",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://blog.csdn.net/lazythinker/article/details/52064165"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_6-generic-hdfs-connector-0007-invalid-input-output-directory-output-directory-is-not-empty"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-generic-hdfs-connector-0007-invalid-input-output-directory-output-directory-is-not-empty"}},[s._v("#")]),s._v(" 6. GENERIC_HDFS_CONNECTOR_0007:Invalid input/output directory - Output directory is not empty")]),s._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[s._v("GENERIC_HDFS_CONNECTOR_0007:Invalid input/output directory - Output directory is not empty")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/BigData/Sqoop/006tNc79ly1fz7od4oqxij326y02ut9v.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("错误原因：\n输入或者输出目录不是空目录，本示例的错误原因是之前启动job后，在HDFS里已经导入过一些数据进去。没删除，所以报这个错。")]),s._v(" "),a("p",[a("strong",[s._v("解决方案：")]),s._v("\n删除该目录下的内容即可\n清空上方创建job时指定的output目录（/root/test）中内容即可。")])])}),[],!1,null,null,null);t.default=e.exports}}]);
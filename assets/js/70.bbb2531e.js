(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{515:function(a,s,t){"use strict";t.r(s);var n=t(10),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("本文主要记录了将MySQL中的数据"),t("strong",[a._v("实时")]),a._v("抽取到Hive中的过程。")]),a._v(" "),t("h2",{attrs:{id:"依赖的环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖的环境"}},[a._v("#")]),a._v(" 依赖的环境")]),a._v(" "),t("h3",{attrs:{id:"安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[a._v("#")]),a._v(" 安装MySQL")]),a._v(" "),t("p",[t("a",{attrs:{href:"http://fangzheng.tech/DataBase/MySQL/1.centos6-10-install-mysql5-6.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Centos6.10安装mysql5.6"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"安装hadoop集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hadoop集群"}},[a._v("#")]),a._v(" 安装Hadoop集群")]),a._v(" "),t("p",[t("a",{attrs:{href:"http://fangzheng.tech/BigData/Hadoop/hadoop1.1.2-install.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Hadoop1.1.2伪分布式安装笔记"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"安装kakfa集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装kakfa集群"}},[a._v("#")]),a._v(" 安装Kakfa集群")]),a._v(" "),t("p",[t("a",{attrs:{href:"http://fangzheng.tech/BigData/Kafka/kafka-install.html#%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[a._v("kafka集群安装"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"安装hbase集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hbase集群"}},[a._v("#")]),a._v(" 安装Hbase集群")]),a._v(" "),t("p",[t("a",{attrs:{href:"http://fangzheng.tech/BigData/Hbase/1.hbase-install-introduce.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Hbase介绍及安装"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"安装hive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hive"}},[a._v("#")]),a._v(" 安装Hive")]),a._v(" "),t("p",[t("a",{attrs:{href:"http://fangzheng.tech/BigData/Hive/1.hive-introduce-install.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Hive介绍及安装"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"安装及配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装及配置"}},[a._v("#")]),a._v(" 安装及配置")]),a._v(" "),t("h3",{attrs:{id:"canal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#canal"}},[a._v("#")]),a._v(" canal")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/alibaba/canal/",target:"_blank",rel:"noopener noreferrer"}},[a._v("canal官网"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("可参考canal的quick-start")]),a._v(" "),t("p",[a._v("以下是我配置的一些信息")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######### \t\tcommon argument\t\t#############")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# tcp bind ip")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.ip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# register ip to zookeeper")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.register.ip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("11111")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.metrics.pull.port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("11112")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# canal instance user/passwd")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# canal.user = canal")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# canal.passwd = E3619321C1A937C46A0D8BD1DAC39F93B27D4458")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# canal admin config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.admin.manager = 127.0.0.1:8089")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.admin.port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("11110")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.admin.user")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("admin")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.admin.passwd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("4ACFE3202A5FF5CF467898FC58AAB1D615029441")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 【【zookeeper配置】】")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.zkServers")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("192.168.56.111:2181,192.168.56.112:2181,192.168.56.113:2181")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# flush data to zk")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.zookeeper.flush.period")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.withoutNetty")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# tcp, kafka, RocketMQ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 【【模式改为kafka】】")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.serverMode")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("kafka")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# flush meta cursor/parse position to file")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.file.data.dir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("${canal.conf.dir}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.file.flush.period")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## memory store RingBuffer size, should be Math.pow(2,n)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.memory.buffer.size")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("16384")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## memory store RingBuffer used memory unit size , default 1kb")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.memory.buffer.memunit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1024 ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## meory store gets mode used MEMSIZE or ITEMSIZE")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.memory.batch.mode")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("MEMSIZE")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.memory.rawEntry")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## detecing config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.detecting.enable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.instance.detecting.sql = insert into retl.xdual values(1,now()) on duplicate key update x=now()")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.detecting.sql")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("select 1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.detecting.interval.time")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.detecting.retry.threshold")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.detecting.heartbeatHaEnable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# support maximum transaction size, more than the size of the transaction will be cut into multiple transactions delivery")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.transaction.size")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1024")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mysql fallback connected to new master should fallback times")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.fallbackIntervalInSeconds")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("60")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# network config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.network.receiveBufferSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("16384")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.network.sendBufferSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("16384")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.network.soTimeout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("30")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# binlog filter config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.druid.ddl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.query.dcl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.query.dml")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.query.ddl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.table.error")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.rows")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.filter.transaction.entry")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# binlog format/image check")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.binlog.format")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("ROW,STATEMENT,MIXED ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.binlog.image")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("FULL,MINIMAL,NOBLOB")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# binlog ddl isolation")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.get.ddl.isolation")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# parallel parser config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.parser.parallel")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## concurrent thread number, default 60% available processors, suggest not to exceed Runtime.getRuntime().availableProcessors()")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.instance.parser.parallelThreadSize = 16")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## disruptor ringbuffer size, must be power of 2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.parser.parallelBufferSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("256")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# table meta tsdb info")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.enable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.dir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("${canal.file.data.dir:../conf}/${canal.instance.destination:}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.url")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("jdbc:h2:${canal.instance.tsdb.dir}/h2;CACHE_SIZE=1000;MODE=MYSQL;")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.dbUsername")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("canal")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.dbPassword")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("canal")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# dump snapshot interval, default 24 hour")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.snapshot.interval")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("24")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# purge snapshot expire , default 360 hour(15 days)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.snapshot.expire")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("360")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# aliyun ak/sk , support rds/mq")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.aliyun.accessKey")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.aliyun.secretKey")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("=")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######### \t\tdestinations\t\t#############")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#【【kafka的topic配置】】")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.destinations")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("example")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# conf root dir")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.conf.dir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("../conf")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# auto scan instance dir add/remove and start/stop instance")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.auto.scan")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.auto.scan.interval")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("5")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.tsdb.spring.xml")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("classpath:spring/tsdb/h2-tsdb.xml")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.instance.tsdb.spring.xml = classpath:spring/tsdb/mysql-tsdb.xml")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.global.mode")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("spring")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.global.lazy")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.global.manager.address")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("${canal.admin.manager}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.instance.global.spring.xml = classpath:spring/memory-instance.xml")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.instance.global.spring.xml")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("classpath:spring/file-instance.xml")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.instance.global.spring.xml = classpath:spring/default-instance.xml")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######### \t\t     MQ \t\t     #############")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################################################")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#【【kafka配置】】")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.servers")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("192.168.56.111:9092,192.168.56.112:9092,192.168.56.113:9092")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.retries")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.batchSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("16384")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.maxRequestSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1048576")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.lingerMs")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("100")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.bufferMemory")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("33554432")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.canalBatchSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("50")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.canalGetTimeout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("100")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.flatMessage")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.compressionType")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("none")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.acks")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("all")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.mq.properties. =")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.producerGroup")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("test")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# Set this value to "cloud", if you want open message trace feature in aliyun.')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.accessChannel")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("local")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# aliyun mq namespace")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#canal.mq.namespace =")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#########     Kafka Kerberos Info    #############")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################################################")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.kafka.kerberos.enable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.kafka.kerberos.krb5FilePath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v('"../conf/kerberos/krb5.conf"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("canal.mq.kafka.kerberos.jaasFilePath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v('"../conf/kerberos/jaas.conf"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br"),t("span",{staticClass:"line-number"},[a._v("38")]),t("br"),t("span",{staticClass:"line-number"},[a._v("39")]),t("br"),t("span",{staticClass:"line-number"},[a._v("40")]),t("br"),t("span",{staticClass:"line-number"},[a._v("41")]),t("br"),t("span",{staticClass:"line-number"},[a._v("42")]),t("br"),t("span",{staticClass:"line-number"},[a._v("43")]),t("br"),t("span",{staticClass:"line-number"},[a._v("44")]),t("br"),t("span",{staticClass:"line-number"},[a._v("45")]),t("br"),t("span",{staticClass:"line-number"},[a._v("46")]),t("br"),t("span",{staticClass:"line-number"},[a._v("47")]),t("br"),t("span",{staticClass:"line-number"},[a._v("48")]),t("br"),t("span",{staticClass:"line-number"},[a._v("49")]),t("br"),t("span",{staticClass:"line-number"},[a._v("50")]),t("br"),t("span",{staticClass:"line-number"},[a._v("51")]),t("br"),t("span",{staticClass:"line-number"},[a._v("52")]),t("br"),t("span",{staticClass:"line-number"},[a._v("53")]),t("br"),t("span",{staticClass:"line-number"},[a._v("54")]),t("br"),t("span",{staticClass:"line-number"},[a._v("55")]),t("br"),t("span",{staticClass:"line-number"},[a._v("56")]),t("br"),t("span",{staticClass:"line-number"},[a._v("57")]),t("br"),t("span",{staticClass:"line-number"},[a._v("58")]),t("br"),t("span",{staticClass:"line-number"},[a._v("59")]),t("br"),t("span",{staticClass:"line-number"},[a._v("60")]),t("br"),t("span",{staticClass:"line-number"},[a._v("61")]),t("br"),t("span",{staticClass:"line-number"},[a._v("62")]),t("br"),t("span",{staticClass:"line-number"},[a._v("63")]),t("br"),t("span",{staticClass:"line-number"},[a._v("64")]),t("br"),t("span",{staticClass:"line-number"},[a._v("65")]),t("br"),t("span",{staticClass:"line-number"},[a._v("66")]),t("br"),t("span",{staticClass:"line-number"},[a._v("67")]),t("br"),t("span",{staticClass:"line-number"},[a._v("68")]),t("br"),t("span",{staticClass:"line-number"},[a._v("69")]),t("br"),t("span",{staticClass:"line-number"},[a._v("70")]),t("br"),t("span",{staticClass:"line-number"},[a._v("71")]),t("br"),t("span",{staticClass:"line-number"},[a._v("72")]),t("br"),t("span",{staticClass:"line-number"},[a._v("73")]),t("br"),t("span",{staticClass:"line-number"},[a._v("74")]),t("br"),t("span",{staticClass:"line-number"},[a._v("75")]),t("br"),t("span",{staticClass:"line-number"},[a._v("76")]),t("br"),t("span",{staticClass:"line-number"},[a._v("77")]),t("br"),t("span",{staticClass:"line-number"},[a._v("78")]),t("br"),t("span",{staticClass:"line-number"},[a._v("79")]),t("br"),t("span",{staticClass:"line-number"},[a._v("80")]),t("br"),t("span",{staticClass:"line-number"},[a._v("81")]),t("br"),t("span",{staticClass:"line-number"},[a._v("82")]),t("br"),t("span",{staticClass:"line-number"},[a._v("83")]),t("br"),t("span",{staticClass:"line-number"},[a._v("84")]),t("br"),t("span",{staticClass:"line-number"},[a._v("85")]),t("br"),t("span",{staticClass:"line-number"},[a._v("86")]),t("br"),t("span",{staticClass:"line-number"},[a._v("87")]),t("br"),t("span",{staticClass:"line-number"},[a._v("88")]),t("br"),t("span",{staticClass:"line-number"},[a._v("89")]),t("br"),t("span",{staticClass:"line-number"},[a._v("90")]),t("br"),t("span",{staticClass:"line-number"},[a._v("91")]),t("br"),t("span",{staticClass:"line-number"},[a._v("92")]),t("br"),t("span",{staticClass:"line-number"},[a._v("93")]),t("br"),t("span",{staticClass:"line-number"},[a._v("94")]),t("br"),t("span",{staticClass:"line-number"},[a._v("95")]),t("br"),t("span",{staticClass:"line-number"},[a._v("96")]),t("br"),t("span",{staticClass:"line-number"},[a._v("97")]),t("br"),t("span",{staticClass:"line-number"},[a._v("98")]),t("br"),t("span",{staticClass:"line-number"},[a._v("99")]),t("br"),t("span",{staticClass:"line-number"},[a._v("100")]),t("br"),t("span",{staticClass:"line-number"},[a._v("101")]),t("br"),t("span",{staticClass:"line-number"},[a._v("102")]),t("br"),t("span",{staticClass:"line-number"},[a._v("103")]),t("br"),t("span",{staticClass:"line-number"},[a._v("104")]),t("br"),t("span",{staticClass:"line-number"},[a._v("105")]),t("br"),t("span",{staticClass:"line-number"},[a._v("106")]),t("br"),t("span",{staticClass:"line-number"},[a._v("107")]),t("br"),t("span",{staticClass:"line-number"},[a._v("108")]),t("br"),t("span",{staticClass:"line-number"},[a._v("109")]),t("br"),t("span",{staticClass:"line-number"},[a._v("110")]),t("br"),t("span",{staticClass:"line-number"},[a._v("111")]),t("br"),t("span",{staticClass:"line-number"},[a._v("112")]),t("br"),t("span",{staticClass:"line-number"},[a._v("113")]),t("br"),t("span",{staticClass:"line-number"},[a._v("114")]),t("br"),t("span",{staticClass:"line-number"},[a._v("115")]),t("br"),t("span",{staticClass:"line-number"},[a._v("116")]),t("br"),t("span",{staticClass:"line-number"},[a._v("117")]),t("br"),t("span",{staticClass:"line-number"},[a._v("118")]),t("br"),t("span",{staticClass:"line-number"},[a._v("119")]),t("br"),t("span",{staticClass:"line-number"},[a._v("120")]),t("br"),t("span",{staticClass:"line-number"},[a._v("121")]),t("br"),t("span",{staticClass:"line-number"},[a._v("122")]),t("br"),t("span",{staticClass:"line-number"},[a._v("123")]),t("br"),t("span",{staticClass:"line-number"},[a._v("124")]),t("br"),t("span",{staticClass:"line-number"},[a._v("125")]),t("br"),t("span",{staticClass:"line-number"},[a._v("126")]),t("br"),t("span",{staticClass:"line-number"},[a._v("127")]),t("br"),t("span",{staticClass:"line-number"},[a._v("128")]),t("br"),t("span",{staticClass:"line-number"},[a._v("129")]),t("br"),t("span",{staticClass:"line-number"},[a._v("130")]),t("br"),t("span",{staticClass:"line-number"},[a._v("131")]),t("br"),t("span",{staticClass:"line-number"},[a._v("132")]),t("br"),t("span",{staticClass:"line-number"},[a._v("133")]),t("br"),t("span",{staticClass:"line-number"},[a._v("134")]),t("br"),t("span",{staticClass:"line-number"},[a._v("135")]),t("br"),t("span",{staticClass:"line-number"},[a._v("136")]),t("br"),t("span",{staticClass:"line-number"},[a._v("137")]),t("br"),t("span",{staticClass:"line-number"},[a._v("138")]),t("br"),t("span",{staticClass:"line-number"},[a._v("139")]),t("br"),t("span",{staticClass:"line-number"},[a._v("140")]),t("br"),t("span",{staticClass:"line-number"},[a._v("141")]),t("br"),t("span",{staticClass:"line-number"},[a._v("142")]),t("br"),t("span",{staticClass:"line-number"},[a._v("143")]),t("br"),t("span",{staticClass:"line-number"},[a._v("144")]),t("br")])]),t("h3",{attrs:{id:"启动canal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动canal"}},[a._v("#")]),a._v(" 启动canal")]),a._v(" "),t("p",[a._v("在"),t("code",[a._v("/canal.deployer-1.1.4/bin")]),a._v("目录下，执行"),t("code",[a._v("startup.sh")]),a._v("启动即可")]),a._v(" "),t("h3",{attrs:{id:"kafka消费"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka消费"}},[a._v("#")]),a._v(" kafka消费")]),a._v(" "),t("p",[a._v("为了方便，这里直接使用在控制台的方式来消费kafka数据的方式")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kafka-console-consumer.sh --zookeeper mini1:2181 --from-beginning --topic example\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("为了方便，设置了从头开始消费，可以从控制台看到kafka消费的内容")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/DatawareHouse/006y8mN6ly1g7czkvqqjtj311h0jcqcj.jpg",alt:"img"}})]),a._v(" "),t("h3",{attrs:{id:"消费kafka数据然后写入到hbase中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费kafka数据然后写入到hbase中"}},[a._v("#")]),a._v(" 消费kafka数据然后写入到hbase中")]),a._v(" "),t("p",[a._v("写程序，将kafka数据解析成表字段形式，插入到hbase中")]),a._v(" "),t("h3",{attrs:{id:"建立hive外部表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立hive外部表"}},[a._v("#")]),a._v(" 建立Hive外部表")]),a._v(" "),t("p",[a._v("建立Hive的外部表，从Hbase中映射数据。注意列族的配置")]),a._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" external "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" pet_medical"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hbase_hive_zfang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("key")]),a._v(" string\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("user_name string\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("user_age "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("user_addr string\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nstored "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("by")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.hbase.HBaseStorageHandler'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" serdeproperties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hbase.columns.mapping"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('":key,c1:user_name,c1:user_age,c1:user_addr"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ntblproperties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hbase.table.name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test_zfang"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h3",{attrs:{id:"将hbase数据库的数据映射到hive中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将hbase数据库的数据映射到hive中"}},[a._v("#")]),a._v(" 将Hbase数据库的数据映射到Hive中")]),a._v(" "),t("p",[a._v("写程序自动完成。。")]),a._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("disable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test_zfang'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test_zfang'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'c1'")]),a._v("\nput "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test_zfang'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'row1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'c1:user_name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'zhangsan'")]),a._v("\nput "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test_zfang'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'row1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'c1:user_age'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'29'")]),a._v("\nput "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test_zfang'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'row1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'c1:user_addr'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'北京市'")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);
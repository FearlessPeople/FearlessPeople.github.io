(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{483:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"单机模式安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单机模式安装"}},[s._v("#")]),s._v(" 单机模式安装")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"http://kafka.apache.org/0101/documentation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),t("p",[s._v("下载"),t("a",{attrs:{href:"https://archive.apache.org/dist/kafka/0.10.1.1/kafka_2.11-0.10.1.1.tgz",target:"_blank",rel:"noopener noreferrer"}},[s._v("kafka_2.11-0.10.1.1.tgz"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),t("p",[s._v("将压缩包拷贝到"),t("code",[s._v("/usr/local/hadoop")]),s._v("然后解压")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" kafka_2.11-0.10.1.1.tgz /usr/local/hadoop\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf kafka_2.11-0.10.1.1.tgz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"配置kafka环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置kafka环境变量"}},[s._v("#")]),s._v(" 配置kafka环境变量")]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("/etc/profile")]),s._v("文件，增加如下配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka_2.11-0.10.1.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KAFKA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${KAFKA_HOME}")]),s._v("/bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("使配置生效")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"配置kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置kafka"}},[s._v("#")]),s._v(" 配置kafka")]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/config/server.properties")]),s._v("文件，修改如下配置。第21行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" broker.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" log.dirs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/log-2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("这里的【broker.id】需要在集群中唯一，log-2目录也分别设置")])]),s._v(" "),t("h3",{attrs:{id:"验证安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[s._v("#")]),s._v(" 验证安装")]),s._v(" "),t("h4",{attrs:{id:"启动kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动kafka"}},[s._v("#")]),s._v(" 启动kafka")]),s._v(" "),t("p",[t("span",{staticStyle:{color:"red"}},[s._v("注意：需要先启动zookeeper集群")])]),s._v(" "),t("p",[s._v("启动命令："),t("code",[s._v("kafka-server-start.sh -daemon ../config/server.properties")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/hadoop/kafka_2.11-0.10.1.1/bin/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka-server-start.sh -daemon ../config/server.properties")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("通过jps，如果能看到kafka进程，表示启动成功。")]),s._v(" "),t("h4",{attrs:{id:"通过zookeeper查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过zookeeper查看"}},[s._v("#")]),s._v(" 通过zookeeper查看")]),s._v(" "),t("p",[s._v("通过zookeeper客户端查看目录结构")]),s._v(" "),t("p",[s._v("启动zookeeper客户端:  "),t("code",[s._v("./zkCli.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/hadoop/zookeeper-3.4.10/bin/")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./zkCli.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("通过"),t("code",[s._v("ls /brokers/ids")]),s._v("查看当前已经启动的kafka代理节点")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /brokers/ids\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以看到，当前的代理节点只有一个1，也就是刚才我们配置的broker.id。")]),s._v(" "),t("p",[s._v("至此，kafka的单机模式已经安装完毕。")]),s._v(" "),t("h2",{attrs:{id:"集群模式安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群模式安装"}},[s._v("#")]),s._v(" 集群模式安装")]),s._v(" "),t("p",[s._v("当单机模式安装完成后，可以接着安装集群模式。这里是三台节点。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("IP")]),s._v(" "),t("th",[t("strong",[s._v("hostname")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("192.168.56.121")]),s._v(" "),t("td",[s._v("mini1")])]),s._v(" "),t("tr",[t("td",[s._v("192.168.56.122")]),s._v(" "),t("td",[s._v("mini2")])]),s._v(" "),t("tr",[t("td",[s._v("192.168.56.123")]),s._v(" "),t("td",[s._v("mini3")])])])]),s._v(" "),t("p",[s._v("集群的安装也比较简单，只需要做一些配置，然后将安装目录拷贝到其他机器上即可。")]),s._v(" "),t("h3",{attrs:{id:"kafka的server-properties配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka的server-properties配置"}},[s._v("#")]),s._v(" kafka的server.properties配置")]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/config/server.properties")]),s._v("文件，增加kafka连接zookeeper集群的配置")]),s._v(" "),t("p",[s._v("在文件的第117行，修改如下配置。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("zookeeper.connect"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mini1:2181,mini2:2181,mini3:2181\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"拷贝kafka目录至其他从节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝kafka目录至其他从节点"}},[s._v("#")]),s._v(" 拷贝kafka目录至其他从节点")]),s._v(" "),t("p",[s._v("将kafka目录拷贝至mini2和mini3节点上")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp -r kafka_2.11-0.10.1.1/ mini2:/usr/local/hadoop/")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp -r kafka_2.11-0.10.1.1/ mini3:/usr/local/hadoop/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("将/etc/profile配置文件拷贝至mini2和mini3节点上")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp /etc/profile mini2:/etc/profile")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp /etc/profile mini3:/etc/profile")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("然后分别在mini2和mini3上执行"),t("code",[s._v("source /etc/profile")]),s._v("使配置文件立即生效")])]),s._v(" "),t("h3",{attrs:{id:"修改每个节点的borker-id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改每个节点的borker-id"}},[s._v("#")]),s._v(" 修改每个节点的borker.id")]),s._v(" "),t("p",[s._v("修改mini2的kafka的borker.id为2")]),s._v(" "),t("p",[s._v("修改mini3的kafka的borker.id为3")]),s._v(" "),t("p",[s._v("注意：当然也可以改为其他值，只要保证在集群中是唯一的即可。")]),s._v(" "),t("h3",{attrs:{id:"修改每个节点的host-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改每个节点的host-name"}},[s._v("#")]),s._v(" 修改每个节点的host.name")]),s._v(" "),t("p",[s._v("在该版本中，如果不设置host.name，则在创建主题及向主题发送消息时发生NOT_LEADER_FOR_PARTITION异常。")]),s._v(" "),t("p",[s._v("分别在mini1、mini2、mini3三台机器上修改server.properties文件，增加host.name=本机IP的配置")]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/config/server.properties")]),s._v("文件，增加host.name=192.168.56.121的配置")]),s._v(" "),t("p",[s._v("在文件的第117行，修改如下配置。")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("p",[s._v("mini1的"),t("code",[s._v("server.properties")]),s._v("完整配置如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("broker.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nlog.dirs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/log-1\nadvertised.host.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.121\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("mini2的"),t("code",[s._v("server.properties")]),s._v("完整配置如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("broker.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nlog.dirs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/log-2\nadvertised.host.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.122\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("mini3的"),t("code",[s._v("server.properties")]),s._v("完整配置如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("broker.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nlog.dirs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/kafka_2.11-0.10.1.1/log-3\nadvertised.host.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.123\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"启动kafka集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动kafka集群"}},[s._v("#")]),s._v(" 启动kafka集群")]),s._v(" "),t("h4",{attrs:{id:"分别启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分别启动"}},[s._v("#")]),s._v(" 分别启动")]),s._v(" "),t("p",[s._v("分别在mini2和mini3上执行如下命令启动kafka")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/hadoop/kafka_2.11-0.10.1.1/bin/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka-server-start.sh -daemon ../config/server.properties")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v('然后在三台节点上，分别通过jps命令查看是否有"kafka"进程')]),s._v(" "),t("p",[s._v("然后在zookeeper客户端上查看kafka的代理数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /brokers/ids\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("可以看到，现在kafka的代理数已经是1，2，3了。")]),s._v(" "),t("h4",{attrs:{id:"集群启动脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群启动脚本"}},[s._v("#")]),s._v(" 集群启动脚本")]),s._v(" "),t("p",[s._v("kafka本身没有提供集群启动脚本，不过可以自己实现。")]),s._v(" "),t("p",[s._v("注意：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("brokers为你集群的所有hostname")])]),s._v(" "),t("li",[t("p",[s._v("KAFKA_HOME为你的安装路径")])])]),s._v(" "),t("p",[t("strong",[s._v("kafka-cluster-start.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("brokers")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mini1 mini2 mini3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KAFKA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bigdata/kafka/"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"INFO:Begin to start kafka cluster..."')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("broker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${brokers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  INFO:Start kafka on '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v('"')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v(" -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source /etc/profile; sh '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${KAFKA_HOME}")]),s._v("/bin/kafka-server-start.sh -daemon "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${KAFKA_HOME}")]),s._v('/config/server.properties"')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" -eq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" INFO:['),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v('] Start successfully "')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"INFO:Kafka cluster starts successfully !"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[t("strong",[s._v("kafka-cluster-stop.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("brokers")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mini1 mini2 mini3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KAFKA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bigdata/kafka/"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"INFO:Begin to stop kafka cluster..."')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("broker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${brokers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  INFO:stop kafka on '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v('"')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v(" -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source /etc/profile; sh '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${KAFKA_HOME}")]),s._v('/bin/kafka-server-stop.sh "')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" -eq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" INFO:['),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${broker}")]),s._v('] stop successfully "')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"INFO:Kafka cluster stop successfully !"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("至此，kafka的集群模式已经安装成功！")]),s._v(" "),t("h2",{attrs:{id:"常见错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[s._v("#")]),s._v(" 常见错误")]),s._v(" "),t("h3",{attrs:{id:"no-kafka-server-to-stop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#no-kafka-server-to-stop"}},[s._v("#")]),s._v(" No kafka server to stop")]),s._v(" "),t("p",[s._v("在我通过kafka-server-stop.sh脚本关闭kafka时得到如下错误，通过jps能看到kafka进程，但是却stop不掉。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jps")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1809")]),s._v(" SecondaryNameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1620")]),s._v(" NameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3237")]),s._v(" Kafka\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1960")]),s._v(" ResourceManager\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3290")]),s._v(" Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2653")]),s._v(" ZooKeeperMain\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2238")]),s._v(" QuorumPeerMain\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka-server-stop.sh")]),s._v("\nNo kafka server to stop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[t("strong",[s._v("原因是有一些操作系统无法通过该命令找到pid，从而无法kill掉该进程。")])]),s._v(" "),t("p",[s._v("kafka-server-stop.sh脚本内容如下，将17行注释，修改为18行内容即可。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/BigData/Kafka/006tNbRwly1fw6rro423pj31fy0fytcg.jpg",alt:""}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PIDS=$(ps ax | grep -i 'kafka\\.Kafka' | grep java | grep -v grep | awk '{print $1}')")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("jps "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Kafka'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("注意：修改完成后，将kafka-server-stop.sh文件拷贝至其他从节点mini2和mini3上")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp /usr/local/hadoop/kafka_2.11-0.10.1.1//bin/kafka-server-stop.sh mini2:/usr/local/hadoop/kafka_2.11-0.10.1.1/bin/")]),s._v("\nkafka-server-stop.sh                                                                                                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1025")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0KB/s   00:00\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp /usr/local/hadoop/kafka_2.11-0.10.1.1//bin/kafka-server-stop.sh mini3:/usr/local/hadoop/kafka_2.11-0.10.1.1/bin/")]),s._v("\nkafka-server-stop.sh                                                                                                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1025")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0KB/s   00:00\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"unable-to-connect-to-zookeeper-server-within-timeout-6000"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unable-to-connect-to-zookeeper-server-within-timeout-6000"}},[s._v("#")]),s._v(" Unable to connect to zookeeper server within timeout: 6000")]),s._v(" "),t("p",[s._v("无法连接到zookeeper，请尝试查看zookeeper的端口是否可用")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-10-29 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":41:02,558"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" FATAL Fatal error during KafkaServerStartable startup. Prepare to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("kafka.server.KafkaServerStartable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\norg.I0Itec.zkclient.exception.ZkTimeoutException: Unable to connect to zookeeper server within timeout: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n\tat org.I0Itec.zkclient.ZkClient.connect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ZkClient.java:1232"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.I0Itec.zkclient.ZkClient."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("init"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ZkClient.java:156"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat org.I0Itec.zkclient.ZkClient."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("init"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ZkClient.java:130"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.utils.ZkUtils$.createZkClientAndConnection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ZkUtils.scala:76"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.utils.ZkUtils$.apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ZkUtils.scala:58"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.server.KafkaServer.initZk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("KafkaServer.scala:327"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.server.KafkaServer.startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("KafkaServer.scala:200"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.server.KafkaServerStartable.startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("KafkaServerStartable.scala:39"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.Kafka$.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Kafka.scala:67"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tat kafka.Kafka.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Kafka.scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("CentOS开启防火墙及端口的命令：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("查看防火墙状态：service iptables status\n\n开启防火墙"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("重启后永久生效"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：chkconfig iptables on\n\n关闭防火墙"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("重启后永久生效"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：chkconfig iptables off\n\n开启防火墙"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("即时生效，重启后失效"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：service iptables start\n\n关闭防火墙"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("即时生效，重启后失效"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：service iptables stop\n\n重启防火墙:service iptables restartd\n\n查看打开的端口:/etc/init.d/iptables status\n\n开启6000端口：iptables -A INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" -j ACCEPT \n\n保存并重启防火墙：\n/etc/rc.d/init.d/iptables save\n/etc/init.d/iptables restart\n\n打开49152~65534之间的端口\niptables -A INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49152")]),s._v(":65534 -j ACCEPT  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),t("p",[s._v("例如刚才的错误，先打开6000端口，然后关闭防火墙。分别在其他从节点机器上都关闭防火墙")])]),s._v(" "),t("h2",{attrs:{id:"kafka-manager的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-manager的安装"}},[s._v("#")]),s._v(" Kafka-manager的安装")]),s._v(" "),t("p",[s._v("kafka-manager是雅虎开源的Kafka的web端管理工具")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/yahoo/kafka-manager",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("注意：上面下载的是源码，下载后需要按照后面步骤进行编译。如果觉得麻烦，可以直接从下面地址下载编译好的 kafka-manager-1.3.3.7.zip。\n链接: "),t("a",{attrs:{href:"http://pan.baidu.com/s/1qY8sGoO",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://pan.baidu.com/s/1qY8sGoO"),t("OutboundLink")],1),s._v(" 密码: ye7b")]),s._v(" "),t("h3",{attrs:{id:"下载解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载解压"}},[s._v("#")]),s._v(" 下载解压")]),s._v(" "),t("p",[s._v("下载编译好的zip文件后，上传至服务器的任意节点。然后解压。例如：我把kafka-manager放到mini1节点上了。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd kafka-manager-1.3.3.7/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 kafka-manager-1.3.3.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":00 application.home_IS_UNDEFINED\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":58 bin\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":00 conf\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12288")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":58 lib\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6335")]),s._v(" Jun  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" README.md\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":03 RUNNING_PID\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":58 share\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 kafka-manager-1.3.3.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"配置kafka-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置kafka-manager"}},[s._v("#")]),s._v(" 配置kafka-manager")]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("/usr/local/hadoop/kafka-manager-1.3.3.7/conf/application.conf")]),s._v("文件，修改如下内容。")]),s._v(" "),t("p",[s._v("修改kafka-manager连接的zookeeper地址，文件的第23行。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" kafka-manager.zkhosts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mini1:2181,mini2:2181,mini3:2181"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"启动kafka-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动kafka-manager"}},[s._v("#")]),s._v(" 启动kafka-manager")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/hadoop/kafka-manager-1.3.3.7\n$ bin/kafka-manager -Dconfig.file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("conf/application.conf -Dhttp.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8090")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("注意端口占用的情况，默认使用9000端口。")]),s._v(" "),t("p",[s._v("如果启动不成功，则可以按提示删除如下文件即可。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 kafka-manager-1.3.3.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/kafka-manager -Dconfig.file=conf/application.conf -Dhttp.port=8090")]),s._v("\nThis application is already running "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Or delete /usr/local/hadoop/kafka-manager-1.3.3.7/RUNNING_PID "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 kafka-manager-1.3.3.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /usr/local/hadoop/kafka-manager-1.3.3.7/RUNNING_PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"关闭kafka-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭kafka-manager"}},[s._v("#")]),s._v(" 关闭kafka-manager")]),s._v(" "),t("p",[s._v("kafka-manager并没有通过stop.sh脚本来停止kafka-manager，需要手工kill掉"),t("code",[s._v("ProdServerStart")]),s._v("进程")]),s._v(" "),t("p",[s._v("kafka-manager进程："),t("code",[s._v("ProdServerStart")])]),s._v(" "),t("p",[s._v("然后删除RUNNING_PID文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jps")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3664")]),s._v(" Kafka\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1809")]),s._v(" SecondaryNameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1620")]),s._v(" NameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1960")]),s._v(" ResourceManager\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3736")]),s._v(" ZooKeeperMain\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4398")]),s._v(" Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2238")]),s._v(" QuorumPeerMain\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4287")]),s._v(" ProdServerStart\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -9 4287")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mini1 conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /usr/local/hadoop/kafka-manager-1.3.3.7/RUNNING_PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ol",[t("li",[t("code",[s._v("ps -ef | grep ProdServerStart")])]),s._v(" "),t("li",[t("code",[s._v("kill -9")]),s._v("进程kafka-manager的进程ID")]),s._v(" "),t("li",[t("code",[s._v("rm -rf /usr/local/hadoop/kafka-manager-1.3.3.7/RUNNING_PID")])])]),s._v(" "),t("h3",{attrs:{id:"访问kafka-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问kafka-manager"}},[s._v("#")]),s._v(" 访问kafka-manager")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/BigData/Kafka/006tNbRwly1fw6t5sgn9lj31ik0ji0up.jpg",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[s._v("#")]),s._v(" 附录")]),s._v(" "),t("h3",{attrs:{id:"kafka常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka常用命令"}},[s._v("#")]),s._v(" kafka常用命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动kafka服务，三台主机分别输入此指令：")]),s._v("\nkafka-server-start.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KAFKA_HOME")]),s._v("/config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以后台的方式启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" kafka-server-start.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KAFKA_HOME")]),s._v("/config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看topic名")]),s._v("\nkafka-topics.sh --list --zookeeper hadoop-001:2181\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建topic名")]),s._v("\nkafka-topics.sh --create --zookeeper hadoop-001:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --topic first\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建生产者")]),s._v("\nkafka-console-producer.sh --broker-list hadoop-001:9092,hadoop-002:9092,hadoop-003:9092 --topic first\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建消费者")]),s._v("\nkafka-console-consumer.sh --zookeeper hadoop-001:2181 --from-beginning --topic first\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1）查看当前服务器中的所有topic")]),s._v("\nkafka-topics.sh --list --zookeeper hadoop-001:2181\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2）创建topic")]),s._v("\nkafka-topics.sh --create --zookeeper hadoop-001:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --topic first\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选项说明：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --topic 定义topic名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --replication-factor  定义副本数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --partitions  定义分区数")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3）  删除topic")]),s._v("\nkafka-topics.sh --delete --zookeeper hadoop-001:2181 --topic first\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要server.properties中设置delete.topic.enable=true否则只是标记删除或者直接重启。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4）发送消息")]),s._v("\nkafka-console-producer.sh --broker-list hadoop-001:9092 --topic first\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hello world\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hadoop  hadoop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5）消费消息")]),s._v("\nkafka-console-consumer.sh --zookeeper hadoop-001:2181 --from-beginning --topic first\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6）查看某个Topic的详情")]),s._v("\nkafka-topics.sh --topic first --describe --zookeeper hadoop-002:2181\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("h3",{attrs:{id:"centos防火墙相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos防火墙相关命令"}},[s._v("#")]),s._v(" CentOS防火墙相关命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙状态：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables status\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙(重启后永久生效)：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" iptables on\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙(重启后永久生效)：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" iptables off\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙(即时生效，重启后失效)：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables start\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙(即时生效，重启后失效)：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables stop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启防火墙:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables restartd\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看打开的端口:")]),s._v("\n/etc/init.d/iptables status\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启6000端口：")]),s._v("\niptables -A INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" -j ACCEPT \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存并重启防火墙：")]),s._v("\n/etc/rc.d/init.d/iptables save\n/etc/init.d/iptables restart\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开49152~65534之间的端口")]),s._v("\niptables -A INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49152")]),s._v(":65534 -j ACCEPT  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);